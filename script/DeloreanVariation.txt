:SetVariation
if
0119:   car 0@ wrecked
then
    end_thread
end
gosub @ThrusterLightsOff
gosub @HideFuel

// Wheel
0B10: 13@ = 1@ AND $FC_BIT
0B10: 14@ = 1@ AND $WHEELS_BIT
0B10: 15@ = 1@ AND $FLYING_BIT
if
    15@ == 0
then
    gosub @ShowBrakes
    gosub @HideHoverBrakes
    gosub @HideHoverThrusters
    gosub @HideDeloreanHoverWheels
    gosub @Hide50sHoverWheels
    gosub @HideTrainHoverWheels
    if or
        13@ == 0
        003B: 14@ == $WHEELS_TRAIN_BIT
    then
        gosub @HideThrusters
    else
        gosub @ShowThrusters
    end
    if
        003B: 14@ == $WHEELS_50S_BIT
    then
        gosub @ShowThrusters
        gosub @HideDeloreanWheels
        gosub @Show50sWheels
        gosub @HideTrainWheels
    else if
        003B: 14@ == $WHEELS_TRAIN_BIT
    then
        gosub @HideThrusters
        gosub @HideDeloreanWheels
        gosub @Hide50sWheels
        gosub @ShowTrainWheels
    else
        gosub @ShowThrusters
        gosub @ShowDeloreanWheels
        gosub @Hide50sWheels
        gosub @HideTrainWheels
    end
    end
else
    gosub @HideBrakes
    gosub @ShowHoverBrakes
    gosub @HideThrusters
    gosub @HideDeloreanWheels
    gosub @Hide50sWheels
    gosub @HideTrainWheels
    if
        003B: 14@ == $WHEELS_50S_BIT
    then
        gosub @ShowHoverThrusters
        gosub @HideDeloreanHoverWheels
        gosub @Show50sHoverWheels
        gosub @HideTrainHoverWheels
    else if
        003B: 14@ == $WHEELS_TRAIN_BIT
    then
        gosub @HideHoverThrusters
        gosub @HideDeloreanHoverWheels
        gosub @Hide50sHoverWheels
        gosub @ShowTrainHoverWheels
    else
        gosub @ShowHoverThrusters
        gosub @ShowDeloreanHoverWheels
        gosub @Hide50sHoverWheels
        gosub @HideTrainHoverWheels
    end
    end
end

// Rear deck
0B10: 15@ = 1@ AND $REAR_BIT
//01E5: text_1number_highpriority 'DAY' 15@ time 10000 1  // Cost: $~1~

if
    15@ == 0
then
    gosub @ShowPlutoniumChamber
    gosub @HideMrFusion
else
    gosub @HidePlutoniumChamber
    gosub @ShowMrFusion
end

// Plate
0B10: 15@ = 1@ AND $PLATE_BIT
if
    003B: 15@ == $PLATE_OUTATIME_BIT
then
    3F10: set_car 0@ component "plate" visible 1
    3F10: set_car 0@ component "platebttf2" visible 0
else if
    003B: 15@ == $PLATE_FUTURE_BIT
then
    3F10: set_car 0@ component "plate" visible 0
    3F10: set_car 0@ component "platebttf2" visible 1
else
    3F10: set_car 0@ component "plate" visible 0
    3F10: set_car 0@ component "platebttf2" visible 0
end
end

// Hoodbox
0B10: 15@ = 1@ AND $HOOD_BIT
if
    15@ == 0
then
    3F10: set_car 0@ component "bonnetbttf1" visible 1
    3F10: set_car 0@ component "bonnetbttf3" visible 0
else
    3F10: set_car 0@ component "bonnetbttf1" visible 0
    3F10: set_car 0@ component "bonnetbttf3" visible 1
end

// Hitch
0B10: 15@ = 1@ AND $HITCH_BIT
if
    15@ == 0
then
    3F10: set_car 0@ component "hitch" visible 0
else
    3F10: set_car 0@ component "hitch" visible 1
end


// Hook
0B10: 15@ = 1@ AND $HOOK_BIT
if
    003B: 15@ == $HOOK_NONE_BIT
then
    3F10: set_car 0@ component "hookbttf1" visible 0
    3F10: set_car 0@ component "hookandholderbttf1" visible 0
    3F10: set_car 0@ component "holderbttf1" visible 0
else
    if
        003B: 15@ == $HOOK_SIDE_BIT
    then
        3F10: set_car 0@ component "hookbttf1" visible 1
        3F10: set_car 0@ component "hookandholderbttf1" visible 0
        3F10: set_car 0@ component "holderbttf1" visible 1
    else if
        003B: 15@ == $HOOK_UP_BIT
    then
        3F10: set_car 0@ component "hookbttf1" visible 0
        3F10: set_car 0@ component "hookandholderbttf1" visible 1
        3F10: set_car 0@ component "holderbttf1" visible 0
    else
        3F10: set_car 0@ component "hookbttf1" visible 0
        3F10: set_car 0@ component "hookandholderbttf1" visible 0
        3F10: set_car 0@ component "holderbttf1" visible 1
    end
    end
end

// Flying Circuits
0B10: 15@ = 1@ AND $FC_BIT
if
    15@ == 0
then
    gosub @ShowBTTF1
    gosub @HideBTTF2

else
    gosub @HideBTTF1
    gosub @ShowBTTF2
end

// Alarm Clock
0B10: 15@ = 1@ AND $CLOCK_BIT
if
    15@ == 0
then
    gosub @HideClock

else
    gosub @ShowClock
end

// Boiler Gauge
0B10: 15@ = 1@ AND $BOILER_BIT
if
    15@ == 0
then
    gosub @HideBoiler

else
    gosub @ShowBoiler
end
end_thread

:LightsOff
3F10: set_car 0@ component "seatbeltlight" visible 0
3F10: set_car 0@ component "lambdalight" visible 0
3F10: set_car 0@ component "oillight" visible 0
3F10: set_car 0@ component "doorajarlight" visible 0
3F10: set_car 0@ component "fuellight" visible 0
3F10: set_car 0@ component "brakelight" visible 0
3F10: set_car 0@ component "batterylight" visible 0
3F10: set_car 0@ component "pchamberemptylight" visible 0
3F10: set_car 0@ component "tcdkeypadenterlighton" visible 0
3F10: set_car 0@ component "lightFL" visible 0
3F10: set_car 0@ component "lightFR" visible 0
3F10: set_car 0@ component "turnlightrf" visible 0
3F10: set_car 0@ component "turnlightlf" visible 0
3F10: set_car 0@ component "turnlightrb" visible 0
3F10: set_car 0@ component "turnlightlb" visible 0
3F10: set_car 0@ component "brklights" visible 0
3F10: set_car 0@ component "revlights" visible 0
3F10: set_car 0@ component "headlighshighon" visible 0
return

:ThrusterLightsOff
3F10: set_car 0@ component "fxthrusterbttf2rbon" visible 0
3F10: set_car 0@ component "fxthrusterbttf2rbth" visible 0
3F10: set_car 0@ component "fxthrusterbttf2rfon" visible 0
3F10: set_car 0@ component "fxthrusterbttf2rfth" visible 0
3F10: set_car 0@ component "fxthrusterbttf2lbon" visible 0
3F10: set_car 0@ component "fxthrusterbttf2lbth" visible 0
3F10: set_car 0@ component "fxthrusterbttf2lfon" visible 0
3F10: set_car 0@ component "fxthrusterbttf2lfth" visible 0

3F18: set_car 0@ component "fxthrusterbttf2rbon" glow 1
3F18: set_car 0@ component "fxthrusterbttf2rbth" glow 1
3F18: set_car 0@ component "fxthrusterbttf2rfon" glow 1
3F18: set_car 0@ component "fxthrusterbttf2rfth" glow 1
3F18: set_car 0@ component "fxthrusterbttf2lbon" glow 1
3F18: set_car 0@ component "fxthrusterbttf2lbth" glow 1
3F18: set_car 0@ component "fxthrusterbttf2lfon" glow 1
3F18: set_car 0@ component "fxthrusterbttf2lfth" glow 1
return

:BoosterLightsOn


:ShowBrakes
2@ = 1
jump @DisplayBrakes

:HideBrakes
2@ = 0

:DisplayBrakes
3F10: set_car 0@ component "wheel_rb" visible 2@
3F10: set_car 0@ component "wheel_lb" visible 2@
3F10: set_car 0@ component "wheel_rf" visible 2@
3F10: set_car 0@ component "wheel_lf" visible 2@
return

:ShowHoverBrakes
2@ = 1
jump @DisplayHoverBrakes

:HideHoverBrakes
2@ = 0

:DisplayHoverBrakes
3F10: set_car 0@ component "fxwheelrb" visible 2@
3F10: set_car 0@ component "fxwheellb" visible 2@
3F10: set_car 0@ component "fxwheelrf" visible 2@
3F10: set_car 0@ component "fxwheellf" visible 2@
return

:ShowThrusters
2@ = 1
jump @DisplayThrusters

:HideThrusters
2@ = 0

:DisplayThrusters
3F10: set_car 0@ component "thrusterbttf2rb" visible 2@
3F10: set_car 0@ component "thrusterbttf2lb" visible 2@
3F10: set_car 0@ component "thrusterbttf2rf" visible 2@
3F10: set_car 0@ component "thrusterbttf2lf" visible 2@
return

:ShowHoverThrusters
2@ = 1
jump @DisplayHoverThrusters

:HideHoverThrusters
2@ = 0

:DisplayHoverThrusters
3F10: set_car 0@ component "fxthrusterbttf2rb" visible 2@
3F10: set_car 0@ component "fxthrusterbttf2lb" visible 2@
3F10: set_car 0@ component "fxthrusterbttf2rf" visible 2@
3F10: set_car 0@ component "fxthrusterbttf2lf" visible 2@
return

:ShowDeloreanHoverWheels
2@ = 1
jump @DisplayDeloreanHoverWheels

:HideDeloreanHoverWheels
2@ = 0

:DisplayDeloreanHoverWheels
3F10: set_car 0@ component "fxwheelbttf1rb" visible 2@
3F10: set_car 0@ component "fxtirebttf1rb" visible 2@

3F10: set_car 0@ component "fxwheelbttf1lb" visible 2@
3F10: set_car 0@ component "fxtirebttf1lb" visible 2@

3F10: set_car 0@ component "fxwheelbttf1rf" visible 2@
3F10: set_car 0@ component "fxtirebttf1rf" visible 2@

3F10: set_car 0@ component "fxwheelbttf1lf" visible 2@
3F10: set_car 0@ component "fxtirebttf1lf" visible 2@
return

:Show50sHoverWheels
2@ = 1
jump @Display50sHoverWheels

:Hide50sHoverWheels
2@ = 0

:Display50sHoverWheels
3F10: set_car 0@ component "fxwheelbttf3rb" visible 2@
3F10: set_car 0@ component "fxtirebttf3rb" visible 2@
3F10: set_car 0@ component "fxhubcapbttf3rb" visible 2@

3F10: set_car 0@ component "fxwheelbttf3lb" visible 2@
3F10: set_car 0@ component "fxtirebttf3lb" visible 2@
3F10: set_car 0@ component "fxhubcapbttf3lb" visible 2@

3F10: set_car 0@ component "fxwheelbttf3rf" visible 2@
3F10: set_car 0@ component "fxtirebttf3rf" visible 2@
3F10: set_car 0@ component "fxhubcapbttf3rf" visible 2@

3F10: set_car 0@ component "fxwheelbttf3lf" visible 2@
3F10: set_car 0@ component "fxtirebttf3lf" visible 2@
3F10: set_car 0@ component "fxhubcapbttf3lf" visible 2@
return

:ShowTrainHoverWheels
2@ = 1
jump @DisplayTrainHoverWheels

:HideTrainHoverWheels
2@ = 0

:DisplayTrainHoverWheels
3F10: set_car 0@ component "fxwheelbttf3rrrb" visible 2@
3F10: set_car 0@ component "fxwheelbttf3rrlb" visible 2@
3F10: set_car 0@ component "fxwheelbttf3rrrf" visible 2@
3F10: set_car 0@ component "fxwheelbttf3rrlf" visible 2@
return

:ShowPlutoniumChamber
2@ = 1
jump @DisplayPlutoniumChamber

:HidePlutoniumChamber
2@ = 0

:DisplayPlutoniumChamber
3F10: set_car 0@ component "bttf1" visible 2@
3F10: set_car 0@ component "reactorlidbttf1" visible 2@
return

:ShowMrFusion
2@ = 1
jump @DisplayMrFusion

:HideMrFusion
2@ = 0

:DisplayMrFusion
3F10: set_car 0@ component "bttf2" visible 2@
3F10: set_car 0@ component "mrfusion" visible 2@
3F10: set_car 0@ component "fusionlatch" visible 2@
return

:ShowClock
2@ = 1
jump @DisplayClock

:HideClock
2@ = 0

:DisplayClock
3F10: set_car 0@ component "hourhand" visible 2@
3F10: set_car 0@ component "minutehand" visible 2@
3F10: set_car 0@ component "clockhammer" visible 2@
3F10: set_car 0@ component "clockhammer" visible 2@
3F10: set_car 0@ component "alarmhand" visible 2@
3F10: set_car 0@ component "clock" visible 2@
return

:ShowBoiler
2@ = 1
jump @DisplayBoiler

:HideBoiler
2@ = 0

:DisplayBoiler
3F10: set_car 0@ component "fireboxgauge" visible 2@
3F10: set_car 0@ component "fireboxgaugeneedle" visible 2@
return

:ShowBTTF1
2@ = 1
jump @DisplayBTTF1

:HideBTTF1
2@ = 0

:DisplayBTTF1
// BTTF1 parts
3F10: set_car 0@ component "xchassis" visible 2@
3F10: set_car 0@ component "underbody" visible 2@
3F10: set_car 0@ component "engine" visible 2@

// Suspension
3F10: set_car 0@ component "brakerf" visible 2@
3F10: set_car 0@ component "brakelf" visible 2@
3F10: set_car 0@ component "brakerb" visible 2@
3F10: set_car 0@ component "brakelb" visible 2@
return

:ShowBTTF2
2@ = 1
jump @DisplayBTTF2

:HideBTTF2
2@ = 0

:DisplayBTTF2
// BTTF2 parts
3F10: set_car 0@ component "xchassisbttf2" visible 2@
3F10: set_car 0@ component "underbodybttf2" visible 2@

// Suspension
3F10: set_car 0@ component "strutrb" visible 2@
3F10: set_car 0@ component "holderrb" visible 2@
3F10: set_car 0@ component "shockpistonrb" visible 2@
3F10: set_car 0@ component "shocklb" visible 2@

3F10: set_car 0@ component "strutlb" visible 2@
3F10: set_car 0@ component "holderlb" visible 2@
3F10: set_car 0@ component "shockpistonlb" visible 2@
3F10: set_car 0@ component "shocklb" visible 2@

3F10: set_car 0@ component "strutrf" visible 2@
3F10: set_car 0@ component "holderrf" visible 2@
3F10: set_car 0@ component "shockpistonrf" visible 2@
3F10: set_car 0@ component "shockrf" visible 2@

3F10: set_car 0@ component "strutlf" visible 2@
3F10: set_car 0@ component "holderlf" visible 2@
3F10: set_car 0@ component "shockpistonlf" visible 2@
3F10: set_car 0@ component "shocklf" visible 2@
return


:ShowDeloreanWheels
2@ = 1
jump @DisplayDeloreanWheels

:HideDeloreanWheels
2@ = 0

:DisplayDeloreanWheels
3F10: set_car 0@ component "wheelbttf1rb" visible 2@
3F10: set_car 0@ component "tirebttf1rb" visible 2@


3F10: set_car 0@ component "wheelbttf1lb" visible 2@
3F10: set_car 0@ component "tirebttf1lb" visible 2@

3F10: set_car 0@ component "wheelbttf1rf" visible 2@
3F10: set_car 0@ component "tirebttf1rf" visible 2@

3F10: set_car 0@ component "wheelbttf1lf" visible 2@
3F10: set_car 0@ component "tirebttf1lf" visible 2@
return

:Show50sWheels
2@ = 1
jump @Display50sWheels

:Hide50sWheels
2@ = 0

:Display50sWheels
3F10: set_car 0@ component "wheelbttf3rb" visible 2@
3F10: set_car 0@ component "tirebttf3rb" visible 2@
3F10: set_car 0@ component "hubcapbttf3rb" visible 2@

3F10: set_car 0@ component "wheelbttf3lb" visible 2@
3F10: set_car 0@ component "tirebttf3lb" visible 2@
3F10: set_car 0@ component "hubcapbttf3lb" visible 2@

3F10: set_car 0@ component "wheelbttf3rf" visible 2@
3F10: set_car 0@ component "tirebttf3rf" visible 2@
3F10: set_car 0@ component "hubcapbttf3rf" visible 2@

3F10: set_car 0@ component "wheelbttf3lf" visible 2@
3F10: set_car 0@ component "tirebttf3lf" visible 2@
3F10: set_car 0@ component "hubcapbttf3lf" visible 2@
return

:ShowTrainWheels

2@ = 1
jump @DisplayTrainWheels

:HideTrainWheels
2@ = 0

:DisplayTrainWheels
3F10: set_car 0@ component "wheelbttf3rrrb" visible 2@
3F10: set_car 0@ component "wheelbttf3rrlb" visible 2@
3F10: set_car 0@ component "wheelbttf3rrrf" visible 2@
3F10: set_car 0@ component "wheelbttf3rrlf" visible 2@
return


:HideFuel
// Hide canister used for fueling
3F10: set_car 0@ component "plutcan" visible 0
3F10: set_car 0@ component "plutcanliquid" visible 0
3F10: set_car 0@ component "plutcaninterior" visible 0
3F10: set_car 0@ component "plut" visible 0

// Hide Plutonium box
3F10: set_car 0@ component "pluttop" visible 0
3F10: set_car 0@ component "plutbox" visible 0

// Hide 12 plutonium canisters

for 2@ = 1 to 12 step 1
3F11: set_car 0@ component "plutcan" index 2@ visible 0
3F11: set_car 0@ component "plutcanliquid" index 2@ visible 0
3F11: set_car 0@ component "plutcaninterior" index 2@ visible 0
3F11: set_car 0@ component "plut" index 2@ visible 0
end
return
