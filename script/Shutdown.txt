:Shutdown
thread 'SHTDWN'

:ShutdownStart
wait 10
if
   Player.Defined($PLAYER_CHAR)
else_jump @ShutdownStart
if
00DE:   player $PLAYER_CHAR driving_vehicle_type #INFERNUS
else_jump @ShutdownStart
03C1: 0@ = player $PLAYER_CHAR car

:ShutdownDriving
wait 10
if
   Player.Defined($PLAYER_CHAR)
else_jump @ShutdownStart
if and
8119:   not car 0@ wrecked
00DC:   player $PLAYER_CHAR driving 0@
else_jump @ShutdownStart
if or
    00E1:   key_pressed 0 15
    $TURN_OFF == 1 // integer values
else_jump @ShutdownDriving
02D4: car 0@ turn_off_engine
$TURN_OFF = 0 // integer values
if
  $IGNITION == 0 // integer values
else_jump @ShutdownStart
040D: unload_wav 2
03CF: load_wav 'BURG_06' as 2
create_thread @PlaySound 2
3F16: rotate_car_part "ignitionkey" angle 225.0 0.0 0.0 car 0@
3F16: rotate_car_part "ignition" angle 225 0.0 0.0 car 0@
//down
for 1@ = 30.0 to 80.0 step 5.0
    wait 10
    3F16: rotate_car_part "voltsneedle" angle 0.0 1@ 0.0 car 0@
end
3F10: set_car 0@ component "seatbeltlight" visible 0
3F10: set_car 0@ component "lambdalight" visible 0
3F10: set_car 0@ component "oillight" visible 0
3F10: set_car 0@ component "fuellight" visible 0
3F10: set_car 0@ component "brakelight" visible 0
3F10: set_car 0@ component "batterylight" visible 0
03D1: play_wav 2
$OFF = 1 // integer values

:ShutdownWait
wait 10
if
   Player.Defined($PLAYER_CHAR)
else_jump @ShutdownStart
if and
8119:   not car 0@ wrecked
00DC:   player $PLAYER_CHAR driving 0@
else_jump @ShutdownStart
jump @ShutdownWait
